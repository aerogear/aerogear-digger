#iOS Fastlane Sample

## Actions

### Prepare

Invokes cocoapods to install project dependencies

#### Parameters

| parameter | type | required | default value | value options |                      description                     |
|:---------:|:----:|:--------:|:-------------:|:-------------:|:----------------------------------------------------:|
| verbose   | bool | no       | true          | true,false    | Runs cocoapods in verbose mode for expressive output |

#### Examples

Default verbose mode:

```
fastlane prepare
```

Disable verbose mode:

```
fastlane verbose:false
```

### Build

Invokes xcodebuild to build an ios project

#### Parameters

| parameter |  type  | required | default value | value options |                            description                            |
|:---------:|:------:|:--------:|:-------------:|:-------------:|:-----------------------------------------------------------------:|
|   scheme  | string |    yes   |               |               | Project scheme to be used, usually the main project's name        |
| workspace | string |    yes   |               |               | Workspace file to be used, usually $main_project_name.xcworkspace |
|   config  | string |    no    |     Debug     | Debug,Release | Sets the build type, default value is "Debug"                     |
|   clean   |  bool  |    no    |      true     |               | Cleans the previous (if any) build files if set to true           |


#### Examples

Release build:

```
fastlane build scheme:helloworld-ios-app workspace:helloworld-ios-app.xcworkspace config:Release clean:true
```

Debug build:

```
fastlane build scheme:helloworld-ios-app workspace:helloworld-ios-app.xcworkspace config:Debug clean:true
```

Using default values (debug build + cleans previous build files):

```
fastlane build scheme:helloworld-ios-app workspace:helloworld-ios-app.xcworkspace
```

### Sign

Handles keychain management and codesign an ios app that was generated by the previous action 

#### Parameters

|     parameter     |  type  | required |    default value    | value options |                                                                                               description                                                                                               |
|:-----------------:|:------:|:--------:|:-------------------:|:-------------:|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
|   keychain_name   | string |    no    |   digger.keychain   |               | Keychain name to be used                                                                                                                                                                                |
| keychain_password | string |    yes   |                     |               | Keychain password                                                                                                                                                                                       |
|     cert_path     | string |    no    |                     |               | Certificate path to be used, can be omitted if private key contains both certificate and key(pkcs12)                                                                                                    |
|      key_path     | string |    yes   |                     |               | Private Key path,  can be either a simple private_key file or a pkcs12 file                                                                                                                             |
|    key_password   | string |    no    |           ""          |               | Private key password (if any) to be used during keychain importing                                                                                                                                      |
|  delete_keychain  |  bool  |    yes   |         true        |   true,false  | Boolean value to indicate if the keychain used during the codesign phase should be deleted at the end of the lane execution                                                                             |
|      app_path     | string |    yes   |                     |               | Application path (usually in builds/$config-iphoneos/somefile.app) to be codesigned                                                                                                                     |
|    profile_path   | string |    yes   |                     |               | Provisioning profile path to be used during codesign action                                                                                                                                             |
|      ipa_path     | string |    no    | $app_path_file_name |               | IPA path  to be used when generating the ipa file, defaults to the same folder where app_path is located using the app filename as its name(so helloworld-ios-app.app generates helloworld-ios-app.ipa) |

#### Examples

Minimal usage:

Generates an IPA in build/Release-iphoneos/helloworld-ios-app.ipa

```
fastlane sign keychain_password:12345 key_path:/path/to/pkcs12_file profile_path:/path/to/profile.mobileprovision app_path:build/Release-iphoneos/helloworld-ios-app.app
```

Changing the resuling IPA path:

```
fastlane sign keychain_password:12345 key_path:/path/to/pkcs12_file profile_path:/path/to/profile.mobileprovision app_path:app-release.ipa
```

Using distinct certificate and key files:

```
fastlane sign keychain_password:12345 cert_path:/path/to/cert.cer key_path:/path/to/key.pem profile_path:/path/to/profile.mobileprovision app_path:build/Release-iphoneos/helloworld-ios-app.app
```

Setting a private key password:

```
fastlane sign keychain_password:12345 cert_path:/path/to/cert.cer key_path:/path/to/key.pem key_password:mypassword profile_path:/path/to/profile.mobileprovision app_path:build/Release-iphoneos/helloworld-ios-app.app
```
